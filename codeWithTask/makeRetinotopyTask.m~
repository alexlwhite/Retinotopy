function c = makeRetinotopyTask(c) 

c.task.buttons = KbName(c.task.buttonNames); 

c.task.timeUnits = c.task.targDur; 

maxEvents = ceil(c.time.totaldur/c.task.timeUnits);

ISIs = c.task.minISI + exprndFree(c.task.expMean,1,maxEvents);
ISIs(ISIs>c.task.maxISI) = c.task.maxISI;

eventOnsets = cumsum(ISIs); 
eventOnsets = eventOnsets(eventOnsets<c.time.totaldur); 

%round to be in units of time that is checked
eventOnsetIs = ceil(eventOnsets/c.task.timeUnits);

c.task.events = zeros(1,maxEvents); 

%make half of them at fixation, half in the peripehry 
if length(unique(task.whichStim)) == 1
    c.task.events(eventOnsetIs) = task.whichStim;
elseif length(unique(task.whichStim)) == 2
    ws = rand(size(eventOnsetIs));
    c.task.events(ws>0.5