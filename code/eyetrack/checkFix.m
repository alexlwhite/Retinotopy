function cor = checkFix()global scr task % determine recorded eye if not already set if ~isfield(task,'DOMEYE') && task.EYE>0    task.DOMEYE = [];    while isempty(task.DOMEYE)        evt = Eyelink('newestfloatsample');        task.DOMEYE = find(evt.gx ~= -32768);    endend%1. Wait until eye is within some boundary region, initlFixChkRad, % for minimum amount of time (minFixTime)cxm = task.fixation.posX(1); %1 is central fixtaion cym = task.fixation.posY(1);rad = scr.intlFixCkRad;Eyelink('command','draw_box %d %d %d %d 15', cxm-rad, cym-rad, cxm+rad, cym+rad);drawFixation(1,1);Screen(scr.main,'Flip');Eyelink('message', 'EVENT_FixationCheck');tstart=GetSecs;cor=0; corStart=0; tCor=0;t=tstart;while ((t-tstart) < task.maxFixCheckTime && tCor<=task.minFixTime)    [xs,ys] = getCoord;    goodfixs = zeros(1,length(xs));     for ci=1:length(xs)        x = xs(ci);        y = ys(ci);                 goodfixs(ci) = sqrt((x-cxm)^2+(y-cym)^2)<rad;    end    cor = ~isempty(goodfixs) && all(goodfixs==1);    	if cor == 1 && corStart == 0		tCorStart = GetSecs; 		corStart = 1;	elseif cor == 1 && corStart == 1		tCor = GetSecs-tCorStart;	else		corStart = 0;	end		t=GetSecs;end